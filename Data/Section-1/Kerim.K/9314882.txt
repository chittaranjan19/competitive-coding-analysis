/*
ID: sananame
PROG: ride
LANG: C++
*/
//Handle : kerim.turkmen
/*
??????????????????????���������
????????????????????��??????????��
??????�����???????��??????????????��
?????�?????�????��?????��????��?????��
?????�?????�???��??????��????��???????��
?????�????�??��????????��????��????????��
??????�???�???�?????????????????????????��
????������������????????????????????????��
???�????????????�?��?????????????��?????��
??��????????????�??��????????????��?????��
?��???�����������????��????????��???????��
?�???????????????�?????�������?????????��
?��??????????????�????????????????????��
??�???������������???????????????????��
??��???????????�??��????????????????��
???������������?????��????????????��
???????????????????????�����������
*/
#include<bits/stdc++.h>

/*
#include<fstream>
#include<cmath>
#include<algorithm>
#include<vector>
*/
using namespace std;

//ifstream cin ("");
//ofstream cout ("");
int arr[309];
char r[309][309];
int rr[309][309];
int main()
{
	int a;
	cin>>a;
	for(int i=0;i<a;i++)
	cin>>arr[i];
	for(int i=0;i<a;i++)
	{
		for(int j=0;j<a;j++)
		{
			cin>>r[i][j];
			if(r[i][j]!='0')
			rr[i][j]=1;
		}
	}
	for(int i=0;i<a;i++)
	{
		int boly=0;
		for(int j=i+1;j<a;j++)
		if(rr[i][j]==1 and arr[i]>arr[j])
		{
			swap(arr[i],arr[j]);
			boly++;
			j=a;
		}
		if(boly==0)
		{
			int yer=0;
			for(int j=0;j<a;j++)
			{
				if(rr[i][j]==1)
				{
					yer=j+1;
					j=a;
				}
			}
			for(int j=yer;j<a;j++)
			{
				if(rr[i][j]==1 and arr[yer-1]>arr[j])
				{
					swap(arr[yer-1],arr[j]);
					j=a;
				}
			}
		}
	}
		for(int i=0;i<a;i++)
		cout<<arr[i]<<" ";
		cout<<endl;
	return 0;
}

